{% extends "base.html" %}

{% from "_dimension_list.html" import dimensions_list as dimensions_list %}
{% from "_util.html" import share_scripts as share_scripts %}
{% from "dataset/_nav.html" import dataset_nav as dataset_nav %}
{% from "_util.html" import share_body as share_body %}
{% from "_util.html" import share_scripts as share_scripts %}

{% block page_title %}{{ dataset.label or dataset.name }}{% endblock %}
{% block page_desc %}{{ dataset.description | markdown_preview }}{% endblock %}

{% block scripts %}
  {{share_scripts()}}
{% endblock %}

{% block content %}
  <div>
    <!-- templates/dataset/about.html -->
    {{dataset_nav(dataset, can, legacy_views, 'about')}}

    <div class="row">
      <div class="col-md-8">
        <h3>{% trans %}Description{% endtrans %}</h3>
        {% if not dataset.description %}
        <div class="help-block" i18n:msg="label">
          {% trans dataset=dataset.label %}No description is available for {{dataset}}{% endtrans %}
        </div>
        {% endif %}
        {{ dataset.description | markdown }}

        <div class="row">
          <div class="col-md-12">
            <h3>{% trans %}Sources{% endtrans %}</h3>
            <span class="help-block">
              {% trans %}This is a listing of all source data that was registered
              for this dataset.{% endtrans %}
            </span>
            <br/>
            {% if sources %}
            <ul>
              {% for source in sources %}
              <li>
                <a href="{{source.url}}">{{ source.url | readable_url }}</a>
              </li>
              {% endfor %}
            </ul>
            {% endif %}
          </div>
          <div class="col-md-12">
            <h3>{% trans %}Team{% endtrans %}</h3>
            <span class="help-block">
              {% trans %}These people are the managers of the dataset. They can
              make modifications to its schema and are responsible
              to make sure the data is accurate.{% endtrans %}
            </span>
            <br/>
            {% if managers %}
            <ul>
              {% for account in managers %}
                <li>
                  <a href="{{ url_for('account.profile', name=account.name)}}">
                    {{account.display_name}}
                  </a>
                </li>
              {% endfor %}
            </ul>
            {% endif %}
          </div>
        </div>

  <div class="row">
    <div class="col-md-12">
      <h3>Timestamps</h3>
      <p class="help-block">
        This dataset was created on <strong>{{ dataset.created_at | format_date }}</strong>.
      </p>
      <p class="help-block">
        This dataset was last modified on <strong>{{ dataset.updated_at | format_date }}</strong>.
      </p>
    </div>
  </div>
      </div>
      <div class="col-md-4">
        <h3>{% trans %}Measures{% endtrans %}</h3>
        <span class="help-block">
          {% trans %}Measures are the numeric properties of each entry in this
          dataset.{% endtrans %}
        </span>
        <ul>
        {% for measure in dataset.measures %}
          <li>
            <strong>{{measure.label or measure.name}}</strong>
            {% if measure.description %}
            <div>
              {{ measure.description | markdown }}
            </div>
            {% endif %}
          </li>
        {% endfor %}
        </ul>
        <h3>{% trans %}Dimensions{% endtrans %}</h3>
        <span class="help-block">
          {% trans %}Dimensions are different aspects of the dataset, such as the
          spender, recipient or classifications that apply.{% endtrans %}
        </span>
        {{dimensions_list(dataset)}}
      </div>
    </div>

    {{share_body()}}
  </div>
{% endblock %}
