<div ng-repeat="(field, message) in errors"
  class="alert alert-danger" role="alert">
  <strong>{{field}}:</strong> {{message}}
</div>

<div id="model-table-wrap">
  <table class="table table-condensed table-bordered model-table">
    <!-- Things needed here: dimension select/edit/create,
         attribute label, attribute name. -->
    <tr>
      <th class="legend">
        Title:
      </th>
      <th ng-repeat="col in columns">
        <input type="text" class="form-control" ng-model="col.label">
      </th>
    </tr>

    <tr>
      <th class="legend">
        Field:
      </th>
      <th ng-repeat="col in columns">
        <input type="text" class="form-control" ng-model="col.name">
      </th>
    </tr>

    <tr>
      <th class="legend">
        Type:
      </th>
      <th ng-repeat="col in columns">
        <select class="form-control" ng-model="col.concept" ng-change="changeConcept(col)">
          <option value="attribute">Descriptive attribute</option>
          <option value="measure">Money</option>
        </select>
      </th>
    </tr>

    <tr>
      <th class="legend">
        Dimension:
      </th>
      <th ng-repeat="col in columns">
        <select ng-show="col.concept == 'measure'" class="form-control tbl-select"
          ng-model="col.label" disabled>
          <option value="{{col.label}}">{{col.label}}</option>
        </select>
        <select ng-show="col.concept == 'attribute'" class="form-control tbl-select"
          ng-model="col.dimension.name" ng-options="d.name as d.label for d in getDimensions()"></select>
        <a class="btn">
          <i class="fa fa-pencil-square-o"></i>
        </a>
      
      </th>
    </tr>

    <tr ng-repeat="row in samples">
      <th class="legend" rowspan="{{samples.length}}" ng-show="$first">
        Samples:
      </th>
      <td ng-repeat="col in columns"
          ng-class="getCellClass(col.column, row[col.column])">
        {{row[col.column] || '&hellip;'}}
      </td>
    </tr>

  </table>
</div>

<hr/>

<div class="">
  <a ng-click="save()" class="btn btn-lg btn-success">
    Save and apply
  </a>
</div>
