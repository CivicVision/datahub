<dataset-settings dataset="dataset"
  next="save()" next-label="Done" next-active="canSave()"
  prev="back()" prev-active="true">
  <div class="row">
    <div class="col-md-4">
      <div class="alert guidance">
        <p>
          Specify the <mark>dimensions</mark> that the
          columns in the data describe.
        </p>
        <p>
          Group columns that refer to the same concept, like
          code numbers and labels for classification schemes, or
          different fields describing a company.
        </p>
      </div>
    </div>
    <div class="col-md-8">
      <div ng-repeat="(field, message) in errors"
        class="alert alert-danger" role="alert">
        <strong>{{field}}:</strong> {{message}}
      </div>

      <div class="alert alert-success" ng-hide="getAvailableFields().length">
        <strong>Looks good!</strong>
        All source columns are in dimensions, press <em>Next</em> to continue.
      </div>

      <table class="table table-model" ng-show="getAvailableFields().length">
        <tr>
          <th width="1%"></th>
          <th>Column name</th>
          <th>Samples</th>
        </tr>
        <tbody ng-repeat="field in getAvailableFields()">
          <tr>
            <td width="1%" class="text-center">
              <input type="checkbox" ng-click="toggleMeasure(field)"
                ng-checked="field.measure">
            </td>
            <th>
              {{ field.title }}
            </th>
            <td width="10%">
              <button class="btn btn-xs btn-default"
                 ng-hide="field.show_samples"
                 ng-click="toggleSamples(field)" >
                <i class="fa fa-eye"></i>
                Show
              </button>
              <button class="btn btn-xs btn-default"
                 ng-show="field.show_samples"
                 ng-click="toggleSamples(field)" >
                <i class="fa fa-eye-slash"></i>
                Hide
              </button>
            </td>
          </tr>
          <tr class="adjunct" ng-show="field.show_samples">
            <td width="1%" class="text-center">
            </td>
            <td colspan="2">
              <span ng-repeat="sample in getSamples(field)">
                <code>{{sample}}</code><span ng-hide="$last">,</span>
              </span>
            </td>
          </tr>
        </tbody>
      </table>


    </div>
  </div>
</dataset-settings>
